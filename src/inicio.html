<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0f0f1a">
    <title>Flechazo TV - Super App</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        /* --- 1. ESTILOS BASE --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        :root { --bg: #0f0f1a; --card: #1e1e2d; --primary: #ff4b4b; --text: #fff; --text-sec: #aaa; }
        body { 
            margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            background: var(--bg); color: var(--text); padding-bottom: 80px; 
            user-select: none; overflow-x: hidden; 
        }
        .hidden { display: none !important; }

        /* --- 2. COMPONENTES UI --- */
        /* Header */
        .header { padding: 15px 20px; background: rgba(15,15,26,0.95); position: sticky; top: 0; z-index: 50; display: flex; justify-content: space-between; align-items: center; backdrop-filter: blur(10px); }
        .logo { font-size: 22px; font-weight: 800; background: linear-gradient(45deg, #ff4b4b, #a24bfa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0; }
        
        /* Listas Horizontales */
        .poster-card { min-width: 110px; width: 110px; height: 160px; border-radius: 8px; overflow: hidden; background: #222; margin-right: 10px; position: relative; transition: transform 0.1s; }
        .poster-card:active { transform: scale(0.95); }
        .poster-card img { width: 100%; height: 100%; object-fit: cover; }
        .horizontal-scroll { display: flex; overflow-x: auto; padding: 0 20px 20px; scrollbar-width: none; }
        .section-title { padding: 20px 20px 10px; font-weight: 700; font-size: 17px; }

        /* Toast Notification */
        .toast { 
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%); 
            background: rgba(30, 30, 40, 0.95); color: white; padding: 12px 25px; 
            border-radius: 50px; z-index: 3000; display: none; font-size: 13px; 
            border-left: 3px solid var(--primary); box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            animation: slideInTop 0.4s; backdrop-filter: blur(5px);
        }

        /* --- 3. MODAL DETALLE (ESTILO NUEVO BONITO) --- */
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); z-index: 500; display: none; 
            justify-content: center; align-items: flex-end; backdrop-filter: blur(8px);
        }
        .modal-overlay.open { display: flex; animation: fadeIn 0.3s; }
        .modal-sheet { 
            background: #15151e; width: 100%; max-width: 500px; 
            border-radius: 25px 25px 0 0; padding: 0;
            max-height: 90vh; overflow-y: auto; 
            animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1); 
            box-shadow: 0 -10px 40px rgba(0,0,0,0.5); position: relative;
        }

        .detail-hero { width: 100%; height: 250px; position: relative; overflow: hidden; }
        .detail-hero img { width: 100%; height: 100%; object-fit: cover; }
        .detail-hero::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 50%; background: linear-gradient(to top, #15151e, transparent); }
        
        .btn-play-hero {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 60px; height: 60px; background: rgba(255, 75, 75, 0.9);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            font-size: 24px; color: white; box-shadow: 0 0 20px rgba(255, 75, 75, 0.5);
            z-index: 2; cursor: pointer;
        }
        .btn-close-modal {
            position: absolute; top: 15px; right: 15px; z-index: 10;
            background: rgba(0,0,0,0.5); width: 30px; height: 30px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; color: white;
            backdrop-filter: blur(4px); font-size: 14px; cursor: pointer;
        }

        .detail-content { padding: 25px; margin-top: -20px; position: relative; z-index: 3; }
        .detail-title { font-size: 26px; font-weight: 800; margin: 0 0 8px 0; line-height: 1.1; }
        .detail-meta { font-size: 13px; color: #aaa; margin-bottom: 15px; display: flex; gap: 10px; align-items: center; }
        .tag-hd { border: 1px solid #aaa; padding: 1px 4px; border-radius: 3px; font-size: 10px; }
        .detail-desc { font-size: 14px; color: #ddd; line-height: 1.6; margin-bottom: 25px; }

        .action-row { display: flex; gap: 12px; }
        .btn-main {
            flex: 1; padding: 14px; border: none; border-radius: 12px;
            font-size: 15px; font-weight: 600; cursor: pointer; display: flex; 
            align-items: center; justify-content: center; gap: 8px;
        }
        .btn-primary { background: white; color: black; }
        .btn-secondary { background: #2a2a35; color: white; }

        /* --- 4. REPRODUCTOR FULLSCREEN --- */
        .player-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: black; z-index: 2500; display: flex; justify-content: center; align-items: center;
        }
        #main-video-player { width: 100%; height: auto; max-height: 100vh; }
        .close-player-btn-fs {
            position: absolute; top: 20px; right: 20px; background: rgba(0,0,0,0.5); color: white;
            border: none; width: 40px; height: 40px; border-radius: 50%; font-size: 20px; z-index: 2501;
        }

        /* --- 5. EXPLORAR / SEARCH --- */
        .search-box {
            background:#252535; width:100%; padding:12px; border-radius:12px; 
            display:flex; align-items:center; border: 1px solid rgba(255,255,255,0.1);
        }
        .explore-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 20px; }
        .explore-item { aspect-ratio: 2/3; background: #222; border-radius: 8px; overflow: hidden; position: relative; animation: fadeIn 0.4s; }
        .explore-item img { width: 100%; height: 100%; object-fit: cover; }
        .category-pill { display: inline-block; padding: 8px 15px; background: #252535; border-radius: 20px; margin-right: 8px; font-size: 12px; color: #ccc; transition: 0.3s; }
        .category-pill.active { background: var(--primary); color: white; }
        .categories-scroll { overflow-x: auto; white-space: nowrap; padding: 10px 20px; }

        /* --- 6. SHORTS --- */
        .shorts-container {
            width: 100vw; height: 100vh; scroll-snap-type: y mandatory; overflow-y: scroll; 
            background: black; position: fixed; top: 0; left: 0; z-index: 200; padding-bottom: 70px;
        }
        .short-item {
            width: 100%; height: 100%; scroll-snap-align: start; position: relative;
            background: #111; display: flex; justify-content: center; align-items: center;
        }
        .short-video { width: 100%; height: 100%; object-fit: cover; z-index: 1; }
        .short-overlay {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 50%;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 100%);
            pointer-events: none; z-index: 2;
        }
        .play-icon-overlay {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 80px; color: rgba(255,255,255,0.6); display: none; 
            pointer-events: none; z-index: 5; animation: pulse 0.5s;
        }
        .short-info { position: absolute; bottom: 90px; left: 15px; width: 75%; pointer-events: none; z-index: 10; text-shadow: 1px 1px 3px black; }
        .short-actions { position: absolute; bottom: 100px; right: 10px; display: flex; flex-direction: column; gap: 20px; align-items: center; z-index: 20; }
        .action-btn { text-align: center; cursor: pointer; pointer-events: auto; }
        .action-icon { 
            width: 45px; height: 45px; background: rgba(255,255,255,0.2); border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; font-size: 22px; color: white; backdrop-filter: blur(5px);
        }
        .liked { color: #ff4b4b !important; animation: pop 0.3s; }

        /* --- 7. PERFIL --- */
        .profile-header { background: linear-gradient(to bottom, #2a2a40, var(--bg-dark)); padding: 40px 20px 20px; text-align: center; }
        .avatar { width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--primary); object-fit: cover; }
        .stats-row { display: flex; justify-content: center; gap: 30px; margin: 20px 0; }
        .stat-item { text-align: center; }
        .stat-num { font-size: 18px; font-weight: bold; display: block; }
        .stat-label { font-size: 11px; color: var(--text-sec); }
        .history-item { 
            display: flex; align-items: center; gap: 15px; margin-bottom: 15px; 
            background: #1a1a24; padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);
        }
        .btn-edit { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 8px 20px; border-radius: 20px; font-size: 12px; }

        /* --- NAV --- */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: #0f0f1a; display: flex; justify-content: space-around; padding: 12px 0 25px 0; z-index: 300; border-top: 1px solid rgba(255,255,255,0.05); }
        .nav-item { text-align: center; color: #666; font-size: 10px; flex: 1; transition: 0.2s; }
        .nav-item.active { color: var(--primary); transform: translateY(-2px); }
        .nav-item i { font-size: 20px; margin-bottom: 5px; display: block; }

        /* Animations */
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideInTop { from { transform: translate(-50%, -20px); opacity: 0; } to { transform: translate(-50%, 0); opacity: 1; } }
        @keyframes pulse { 0%{opacity:0; transform: translate(-50%, -50%) scale(0.5);} 100%{opacity:1; transform: translate(-50%, -50%) scale(1);} }
        @keyframes pop { 0%{transform:scale(1)} 50%{transform:scale(1.4)} 100%{transform:scale(1)} }
    </style>
</head>
<body>

    <div id="toast" class="toast">Notificaci贸n</div>

    <div id="video-player-overlay" class="player-overlay hidden">
        <button class="close-player-btn-fs" onclick="closePlayer()"><i class="fa-solid fa-xmark"></i></button>
        <video id="main-video-player" controls playsinline>
            <source src="" type="video/mp4">
        </video>
    </div>

    <div id="tab-home" class="screen">
        <div class="header">
            <h2 class="logo">Flechazo TV</h2>
            <i class="fa-regular fa-bell" style="font-size: 20px;"></i>
        </div>
        <div class="section-title"> Tendencias</div>
        <div class="horizontal-scroll" id="home-list">
            <div style="padding:20px; color:#666;">Cargando...</div>
        </div>
        <div class="section-title">锔 Acci贸n y Free Fire</div>
        <div class="horizontal-scroll" id="action-list"></div>
        <br><br><br>
    </div>

    <div id="tab-explore" class="screen hidden">
        <div class="header" style="display:block;">
            <div class="search-box">
                <i class="fa-solid fa-magnifying-glass" style="color:#666; margin-right:10px;"></i>
                <input type="text" id="search-input" placeholder="Buscar..." style="background:transparent; border:none; color:white; width:100%;">
            </div>
        </div>
        <div class="categories-scroll">
            <span class="category-pill active" onclick="filterCat('Todo', this)">Todo</span>
            <span class="category-pill" onclick="filterCat('Acci贸n', this)">Acci贸n</span>
            <span class="category-pill" onclick="filterCat('Free Fire', this)">Free Fire</span>
        </div>
        <div class="explore-grid" id="explore-grid"></div>
        <br><br><br>
    </div>

    <div id="tab-shorts" class="screen hidden" style="background: black;">
        <div class="shorts-container" id="shorts-feed"></div>
    </div>

    <div id="tab-profile" class="screen hidden">
        <div class="profile-header">
            <img src="https://i.pinimg.com/736x/8b/16/7a/8b167af653c2399dd93b952a48740620.jpg" class="avatar" id="current-avatar">
            <h2 id="profile-name" style="margin: 10px 0 5px;">Gamer Pro</h2>
            <div style="font-size:12px; color:#aaa;">ID: 839201</div>
            <div style="margin-top:15px;">
                <button class="btn-edit" onclick="openEditProfile()">Editar</button>
            </div>
            <div class="stats-row">
                <div class="stat-item" onclick="showHistory('list')"><span class="stat-num" id="count-list">0</span><span class="stat-label">Lista</span></div>
                <div class="stat-item" onclick="showHistory('history')"><span class="stat-num" id="count-history">0</span><span class="stat-label">Historial</span></div>
            </div>
        </div>
        <div style="padding: 20px;">
            <h3 id="history-title" style="margin-top:0;">Actividad</h3>
            <div id="history-container"></div>
        </div>
        <br><br><br>
    </div>

    <div class="modal-overlay" id="detail-modal" onclick="if(event.target.id==='detail-modal') closeModal()">
        <div class="modal-sheet">
            <div id="modal-injector"></div>
        </div>
    </div>

    <div class="modal-overlay" id="edit-modal" onclick="if(event.target.id==='edit-modal') document.getElementById('edit-modal').classList.remove('open')">
        <div class="modal-sheet" style="padding:25px;">
            <h3>Editar Perfil</h3>
            <input type="text" id="edit-name-input" style="width:100%; padding:10px; background:#222; border:1px solid #444; color:white; border-radius:8px; margin-bottom:15px;" placeholder="Nombre...">
            <button onclick="saveProfile()" style="width:100%; padding:15px; background:var(--primary); color:white; border:none; border-radius:12px;">Guardar</button>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home', this)"><i class="fa-solid fa-house"></i>Inicio</div>
        <div class="nav-item" onclick="switchTab('explore', this)"><i class="fa-solid fa-compass"></i>Explorar</div>
        <div class="nav-item" onclick="switchTab('shorts', this)"><i class="fa-brands fa-tiktok"></i>Shorts</div>
        <div class="nav-item" onclick="switchTab('profile', this)"><i class="fa-solid fa-user"></i>Perfil</div>
    </nav>

    <script>
        /* --- 1. DATOS --- */
        let allMovies = [];
        const shortsMockData = [
            { id: 101, user: "ElTioSpoiler", desc: "隆Jugada maestra! 别", likes: "10k", videoUrl: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4" },
            { id: 102, user: "FlechazoClips", desc: "Final inesperado... ", likes: "5k", videoUrl: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4" },
            { id: 103, user: "ProGamer", desc: "Bug encontrado ", likes: "340", videoUrl: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4" }
        ];
        let myList = [];
        let myHistory = [];
        let searchTimeout;

        /* --- 2. INIT --- */
        async function init() {
            try {
                // Fetch API
                const res = await fetch('http://localhost:3000/api/movies');
                if(!res.ok) throw new Error("Offline");
                allMovies = await res.json();
            } catch (e) {
                // Fallback Data (Si la API falla)
                allMovies = [
                    { id: 1, title: "Amor Prohibido", desc: "El amor entre dos mundos opuestos.", img: "https://image.tmdb.org/t/p/w300/6tfT03sGp9k4c0J3dypjrI8TSAI.jpg", cat: "Romance", videoUrl: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" },
                    { id: 2, title: "Free Fire: Booyah", desc: "La batalla real comienza ahora.", img: "https://image.tmdb.org/t/p/w300/rweIrveL43TaxUN0akQEaAXL6x0.jpg", cat: "Acci贸n", videoUrl: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4" },
                    { id: 3, title: "Venganza Mortal", desc: "Nadie escapa de su pasado.", img: "https://image.tmdb.org/t/p/w300/fiVW06jE7z9YnO4trhaMEdclSiC.jpg", cat: "Acci贸n", videoUrl: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4" },
                    { id: 4, title: "El Hacker", desc: "C贸digo rojo en la red.", img: "https://image.tmdb.org/t/p/w300/1E5baAaEse26fej7uHcjOgEE2t2.jpg", cat: "Suspenso", videoUrl: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/TearsOfSteel.mp4" }
                ];
            }
            renderHome();
            renderExplore(allMovies);
            loadShorts();
            setupSearch();
            showHistory('history');
        }

        /* --- 3. LOGICA UI --- */
        function renderHome() {
            const hList = document.getElementById('home-list');
            const aList = document.getElementById('action-list');
            hList.innerHTML = ''; aList.innerHTML = '';
            allMovies.forEach(m => {
                const card = `<div class="poster-card" onclick="openDetail(${m.id})"><img src="${m.img}"></div>`;
                hList.innerHTML += card;
                if(m.cat === 'Acci贸n' || m.cat === 'Free Fire') aList.innerHTML += card;
            });
        }

        function renderExplore(data) {
            const g = document.getElementById('explore-grid');
            g.innerHTML = '';
            data.forEach(m => g.innerHTML += `<div class="explore-item" onclick="openDetail(${m.id})"><img src="${m.img}"></div>`);
        }

        /* --- 4. MODAL BONITO & PLAYER --- */
        window.openDetail = (id) => {
            const m = allMovies.find(x => x.id === id);
            if(!m) return;
            const injector = document.getElementById('modal-injector');
            injector.innerHTML = `
                <div class="detail-hero" onclick="playMovie(${m.id})">
                    <img src="${m.img}">
                    <div class="btn-close-modal" onclick="event.stopPropagation(); closeModal()"><i class="fa-solid fa-xmark"></i></div>
                    <div class="btn-play-hero"><i class="fa-solid fa-play"></i></div>
                </div>
                <div class="detail-content">
                    <h2 class="detail-title">${m.title}</h2>
                    <div class="detail-meta"><span style="color:#46d369;font-weight:bold;">98% Match</span><span>${m.cat}</span><span class="tag-hd">HD</span></div>
                    <p class="detail-desc">${m.desc}</p>
                    <div class="action-row">
                        <button class="btn-main btn-primary" onclick="playMovie(${m.id})"><i class="fa-solid fa-play"></i> Ver Ahora</button>
                        <button class="btn-main btn-secondary" onclick="toggleMyList(${m.id})"><i class="fa-solid fa-plus"></i> Mi Lista</button>
                    </div>
                </div>`;
            document.getElementById('detail-modal').classList.add('open');
        }

        window.closeModal = () => document.getElementById('detail-modal').classList.remove('open');

        window.playMovie = (id) => {
            const m = allMovies.find(x => x.id === id);
            const v = document.getElementById('main-video-player');
            v.src = m.videoUrl;
            document.getElementById('video-player-overlay').classList.remove('hidden');
            v.play().catch(()=>{});
            if(!myHistory.find(h=>h.id===id)) myHistory.unshift(m);
            closeModal();
            showHistory('history');
        }

        window.closePlayer = () => {
            const v = document.getElementById('main-video-player');
            v.pause(); v.src="";
            document.getElementById('video-player-overlay').classList.add('hidden');
        }

        /* --- 5. SHORTS --- */
        function loadShorts() {
            const c = document.getElementById('shorts-feed');
            shortsMockData.forEach(s => {
                c.insertAdjacentHTML('beforeend', `
                <div class="short-item" onclick="toggleShortPlay(this)">
                    <video class="short-video" src="${s.videoUrl}" loop playsinline></video>
                    <div class="play-icon-overlay"><i class="fa-solid fa-play"></i></div>
                    <div class="short-overlay"></div>
                    <div class="short-actions">
                        <div class="action-btn" onclick="toggleLike(this, event)"><div class="action-icon"><i class="fa-solid fa-heart"></i></div><span>${s.likes}</span></div>
                        <div class="action-btn" onclick="event.stopPropagation()"><div class="action-icon"><i class="fa-solid fa-share"></i></div><span>Share</span></div>
                    </div>
                    <div class="short-info"><div><b>@${s.user}</b></div><div style="font-size:13px;color:#ddd;">${s.desc}</div></div>
                </div>`);
            });
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    const v = e.target.querySelector('video');
                    const i = e.target.querySelector('.play-icon-overlay');
                    if(e.isIntersecting) { v.currentTime=0; v.play().catch(()=>{}); i.style.display='none'; } else { v.pause(); }
                });
            }, { threshold: 0.7 });
            document.querySelectorAll('.short-item').forEach(i => observer.observe(i));
        }

        window.toggleShortPlay = (el) => {
            const v = el.querySelector('video'); const i = el.querySelector('.play-icon-overlay');
            if(v.paused) { v.play(); i.style.display='none'; } else { v.pause(); i.style.display='block'; }
        }
        window.toggleLike = (btn, e) => { e.stopPropagation(); btn.querySelector('.action-icon').classList.toggle('liked'); }

        /* --- 6. PERFIL & BUSQUEDA --- */
        function setupSearch() {
            document.getElementById('search-input').addEventListener('input', (e) => {
                const txt = e.target.value.trim().toLowerCase();
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    if(!txt) renderExplore(allMovies);
                    else renderExplore(allMovies.filter(m => m.title.toLowerCase().includes(txt) || m.cat.toLowerCase().includes(txt)));
                }, 300);
            });
        }

        window.toggleMyList = (id) => {
            const m = allMovies.find(x => x.id === id);
            const idx = myList.findIndex(x => x.id === id);
            if(idx === -1) { myList.push(m); showToast("Agregado"); } else { myList.splice(idx,1); showToast("Eliminado"); }
            showHistory('list'); closeModal();
        }

        window.showHistory = (type) => {
            const c = document.getElementById('history-container');
            const data = type === 'list' ? myList : myHistory;
            document.getElementById('history-title').innerText = type === 'list' ? "Mi Lista" : "Actividad";
            document.getElementById('count-list').innerText = myList.length;
            document.getElementById('count-history').innerText = myHistory.length;
            c.innerHTML = data.length ? '' : '<div style="text-align:center;color:#666;">Vac铆o</div>';
            data.forEach(m => c.innerHTML += `<div class="history-item"><img src="${m.img}" style="width:40px;height:50px;object-fit:cover;border-radius:4px;"><div>${m.title}</div></div>`);
        }
        
        window.openEditProfile = () => {
            document.getElementById('edit-name-input').value = document.getElementById('profile-name').innerText;
            document.getElementById('edit-modal').classList.add('open');
        }
        window.saveProfile = () => {
            const name = document.getElementById('edit-name-input').value;
            if(name) document.getElementById('profile-name').innerText = name;
            document.getElementById('edit-modal').classList.remove('open');
        }

        /* --- UTILS --- */
        window.switchTab = (id, el) => {
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
            document.getElementById('tab-'+id).classList.remove('hidden');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            el.classList.add('active');
            if(id !== 'shorts') document.querySelectorAll('video').forEach(v => v.pause());
        }
        window.showToast = (msg) => {
            const t = document.getElementById('toast'); t.innerText = msg; t.style.display='block';
            setTimeout(()=>t.style.display='none', 2000);
        }
        window.filterCat = (cat, el) => {
            document.querySelectorAll('.category-pill').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            renderExplore(cat === 'Todo' ? allMovies : allMovies.filter(m => m.cat === cat));
        }

        init();
    </script>
</body>
</html>
