<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Netflix Ultra Custom Player</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.youtube.com/iframe_api"></script>
    <style>
        :root {
            --n-red: #E50914;
            --btn-size: clamp(45px, 8vw, 70px);
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: #000; color: #fff; font-family: 'Netflix Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            overflow: hidden; touch-action: none;
        }

        /* Capas Base */
        .player-wrapper { position: relative; width: 100vw; height: 100vh; background: #000; }
        .video-container { position: absolute; inset: 0; pointer-events: none; overflow: hidden; }
        #yt-frame { width: 100%; height: 100%; transform: scale(1.15); }

        /* Capa de Brillo */
        #br-overlay { position: fixed; inset: 0; background: #000; pointer-events: none; opacity: 0; z-index: 1000; }

        /* UI Overlays */
        .ui-main {
            position: absolute; inset: 0; z-index: 500;
            background: radial-gradient(circle, transparent 10%, rgba(0,0,0,0.5) 50%, rgba(0,0,0,0.9) 100%);
            display: flex; flex-direction: column; justify-content: space-between;
            padding: env(safe-area-inset-top) 5% env(safe-area-inset-bottom) 5%;
            transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .ui-main.hidden { opacity: 0; pointer-events: none; }

        /* Barra Superior */
        .header { display: flex; justify-content: space-between; align-items: center; padding-top: 20px; }
        .header-title { display: flex; align-items: center; gap: 20px; font-size: 1.1rem; }
        .icon-btn-small { background: none; border: none; color: white; font-size: 1.4rem; cursor: pointer; }

        /* Controles Centrales (Mejorados) */
        .controls-center { display: flex; justify-content: center; align-items: center; gap: clamp(40px, 15vw, 100px); }
        .play-pause-btn {
            width: var(--btn-size); height: var(--btn-size);
            border-radius: 50%; border: none; background: none; color: white;
            font-size: 3.5rem; cursor: pointer; display: flex; align-items: center; justify-content: center;
        }
        .skip-btn {
            background: none; border: none; color: white; font-size: 2.8rem;
            cursor: pointer; position: relative; transition: transform 0.1s;
        }
        .skip-btn:active { transform: scale(0.9); }
        .skip-btn span {
            position: absolute; top: 57%; left: 50%; transform: translate(-50%, -50%);
            font-size: 0.8rem; font-weight: 900;
        }

        /* Feedback de Doble Toque */
        .tap-feedback {
            position: absolute; top: 50%; width: 100px; height: 100px;
            background: rgba(255,255,255,0.1); border-radius: 50%;
            display: none; align-items: center; justify-content: center;
            transform: translateY(-50%); z-index: 400; font-size: 1.5rem;
        }

        /* Barra de Progreso (Mejorada) */
        .footer { width: 100%; padding-bottom: 20px; }
        .prog-container { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; }
        .seek-bar-bg {
            flex: 1; height: 4px; background: rgba(255,255,255,0.3);
            border-radius: 2px; position: relative; cursor: pointer; transition: height 0.2s;
        }
        .prog-container:hover .seek-bar-bg { height: 6px; }
        .seek-fill { height: 100%; background: var(--n-red); width: 0%; border-radius: 2px; position: relative; }
        .seek-handle {
            position: absolute; right: -7px; top: 50%; transform: translateY(-50%);
            width: 14px; height: 14px; background: var(--n-red); border-radius: 50%;
            box-shadow: 0 0 10px rgba(0,0,0,0.8);
        }

        /* Men√∫ Inferior */
        .bottom-nav { display: flex; justify-content: space-around; font-size: 0.75rem; opacity: 0.8; }
        .nav-opt { display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; }
        .nav-opt i { font-size: 1.3rem; }

        /* Indicadores Laterales */
        .v-slider {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 4px; height: 150px; background: rgba(255,255,255,0.2);
            border-radius: 2px; display: none; z-index: 1100;
        }
        .v-fill { width: 100%; height: 50%; background: #fff; position: absolute; bottom: 0; }
    </style>
</head>
<body>

<div id="br-overlay"></div>

<div class="player-wrapper" id="player-box">
    <div class="video-container"><div id="yt-frame"></div></div>

    <div id="left-tap" class="tap-feedback" style="left: 15%; border-radius: 0 100% 100% 0;"><i class="fas fa-backward"></i></div>
    <div id="right-tap" class="tap-feedback" style="right: 15%; border-radius: 100% 0 0 100%;"><i class="fas fa-forward"></i></div>

    <div id="br-slider" class="v-slider" style="left: 30px;"><div class="v-fill" id="br-lvl"></div></div>
    <div id="vol-slider" class="v-slider" style="right: 30px;"><div class="v-fill" id="vol-lvl"></div></div>

    <div class="ui-main" id="ui">
        <header class="header">
            <div class="header-title">
                <button class="icon-btn-small"><i class="fas fa-arrow-left"></i></button>
                <span id="title">Cargando...</span>
            </div>
            <div style="display:flex; gap:25px">
                <i class="fas fa-cast icon-btn-small"></i>
                <i class="fas fa-lock-open icon-btn-small" id="lock-icon" onclick="toggleLock()"></i>
            </div>
        </header>

        <div class="controls-center">
            <button class="skip-btn" onclick="seek(-10)"><i class="fas fa-undo-alt"></i><span>10</span></button>
            <button class="play-pause-btn" onclick="togglePlay()"><i id="play-icon" class="fas fa-play"></i></button>
            <button class="skip-btn" onclick="seek(10)"><i class="fas fa-redo-alt"></i><span>10</span></button>
        </div>

        <footer class="footer">
            <div class="prog-container" id="seek-area">
                <div class="seek-bar-bg">
                    <div class="seek-fill" id="p-fill"><div class="seek-handle"></div></div>
                </div>
                <span id="time-txt" style="min-width: 50px">00:00</span>
            </div>
            <div class="bottom-nav">
                <div class="nav-opt"><i class="fas fa-scissors"></i><span>Recortar</span></div>
                <div class="nav-opt"><i class="fas fa-gauge-high"></i><span>Velocidad</span></div>
                <div class="nav-opt"><i class="fas fa-layer-group"></i><span>Episodios</span></div>
                <div class="nav-opt"><i class="fas fa-comment-dots"></i><span>Audio</span></div>
                <div class="nav-opt"><i class="fas fa-forward-step"></i><span>Siguiente</span></div>
            </div>
        </footer>
    </div>
</div>

<script>
    let player;
    let isLocked = false;
    let uiTimer;
    let brightness = 100;

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('yt-frame', {
            videoId: 'dQw4w9WgXcQ', // ID inicial
            playerVars: { 'controls': 0, 'modestbranding': 1, 'rel': 0, 'playsinline': 1, 'iv_load_policy': 3 },
            events: { 'onReady': onReady, 'onStateChange': onState }
        });
    }

    function onReady() {
        document.getElementById('title').innerText = player.getVideoData().title;
        setInterval(updateUI, 500);
    }

    function onState(e) {
        const icon = document.getElementById('play-icon');
        if (e.data == YT.PlayerState.PLAYING) {
            icon.className = 'fas fa-pause';
            startAutoHide();
        } else {
            icon.className = 'fas fa-play';
            showUI();
        }
    }

    function togglePlay() {
        if (player.getPlayerState() == YT.PlayerState.PLAYING) player.pauseVideo();
        else player.playVideo();
    }

    function seek(s) {
        player.seekTo(player.getCurrentTime() + s, true);
    }

    function updateUI() {
        if (player && player.getDuration) {
            const pct = (player.getCurrentTime() / player.getDuration()) * 100;
            document.getElementById('p-fill').style.width = pct + '%';
            let m = Math.floor(player.getCurrentTime() / 60);
            let s = Math.floor(player.getCurrentTime() % 60);
            document.getElementById('time-txt').innerText = `${m}:${s < 10 ? '0'+s : s}`;
        }
    }

    // Doble toque (Gestos)
    let lastTap = 0;
    document.getElementById('player-box').addEventListener('touchstart', e => {
        const now = Date.now();
        const x = e.touches[0].clientX;
        if (now - lastTap < 300) {
            if (x < window.innerWidth / 2) {
                seek(-10);
                flashFeedback('left-tap');
            } else {
                seek(10);
                flashFeedback('right-tap');
            }
        }
        lastTap = now;
        handleGestures(e);
    });

    function flashFeedback(id) {
        const el = document.getElementById(id);
        el.style.display = 'flex';
        setTimeout(() => el.style.display = 'none', 500);
    }

    // Manejo de Interfaz
    function showUI() {
        document.getElementById('ui').classList.remove('hidden');
        clearTimeout(uiTimer);
    }

    function startAutoHide() {
        clearTimeout(uiTimer);
        uiTimer = setTimeout(() => {
            if (!isLocked && player.getPlayerState() == YT.PlayerState.PLAYING)
                document.getElementById('ui').classList.add('hidden');
        }, 3000);
    }

    document.getElementById('player-box').addEventListener('click', showUI);

    function toggleLock() {
        isLocked = !isLocked;
        const icon = document.getElementById('lock-icon');
        icon.className = isLocked ? 'fas fa-lock icon-btn-small' : 'fas fa-lock-open icon-btn-small';
        document.getElementById('ui').style.justifyContent = isLocked ? 'flex-start' : 'space-between';
        document.querySelector('.controls-center').style.display = isLocked ? 'none' : 'flex';
        document.querySelector('.footer').style.display = isLocked ? 'none' : 'block';
    }

    // Barra de progreso interactiva (Click para saltar)
    document.getElementById('seek-area').addEventListener('click', e => {
        const rect = e.currentTarget.querySelector('.seek-bar-bg').getBoundingClientRect();
        const pos = (e.clientX - rect.left) / rect.width;
        player.seekTo(pos * player.getDuration(), true);
    });
</script>

</body>
</html>
