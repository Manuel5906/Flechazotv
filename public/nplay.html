<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Premium YouTube Netflix Style</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.youtube.com/iframe_api"></script>
    <style>
        :root {
            --n-red: #E50914;
            --safe-area: env(safe-area-inset-top, 20px);
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: #000; color: #fff; font-family: 'Helvetica Neue', Arial, sans-serif;
            overflow: hidden; touch-action: none;
        }

        /* Contenedor Maestro */
        .master-container {
            position: relative; width: 100vw; height: 100vh;
            display: flex; align-items: center; justify-content: center;
        }

        /* Capa de Brillo */
        #br-layer {
            position: fixed; inset: 0; background: black;
            pointer-events: none; opacity: 0; z-index: 1000;
        }

        /* Contenedor del Iframe de YouTube */
        .video-box {
            position: absolute; width: 100%; height: 100%;
            pointer-events: none; /* Bloquea clics directos en YouTube */
        }
        #yt-frame { width: 100%; height: 100%; transform: scale(1.1); /* Oculta bordes de YT */ }

        /* Capa de Interfaz (Encima de YouTube) */
        .ui-wrapper {
            position: absolute; inset: 0; z-index: 500;
            background: radial-gradient(circle, transparent 10%, rgba(0,0,0,0.8) 100%);
            display: flex; flex-direction: column; justify-content: space-between;
            padding: var(--safe-area) 40px 30px 40px;
            transition: opacity 0.4s ease;
        }

        .ui-wrapper.hidden { opacity: 0; pointer-events: none; }

        /* HEADER */
        .header { display: flex; justify-content: space-between; align-items: center; }
        .back-btn { font-size: 1.5rem; cursor: pointer; }

        /* CONTROLES CENTRALES */
        .main-controls {
            display: flex; justify-content: center; align-items: center; gap: 60px;
        }
        .ctrl-btn {
            background: none; border: none; color: white; cursor: pointer;
            font-size: 3.5rem; transition: transform 0.2s;
        }
        .ctrl-btn:active { transform: scale(0.9); }
        .skip-icon { position: relative; font-size: 2.5rem; }
        .skip-icon span {
            position: absolute; top: 57%; left: 50%; transform: translate(-50%, -50%);
            font-size: 0.75rem; font-weight: bold;
        }

        /* INDICADORES LATERALES (Brillo y Vol) */
        .side-meter {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 8px; height: 180px; background: rgba(255,255,255,0.2);
            border-radius: 10px; display: none; flex-direction: column-reverse;
        }
        .meter-fill { width: 100%; height: 50%; background: white; border-radius: 10px; }
        
        /* FOOTER Y PROGRESO */
        .footer { width: 100%; }
        .progress-container {
            display: flex; align-items: center; gap: 15px; margin-bottom: 25px;
        }
        .seek-bar {
            flex: 1; height: 4px; background: rgba(255,255,255,0.3);
            border-radius: 2px; position: relative; cursor: pointer;
        }
        .seek-fill {
            height: 100%; background: var(--n-red); width: 0%;
            border-radius: 2px; position: relative;
        }
        .seek-fill::after {
            content: ''; position: absolute; right: -7px; top: -5px;
            width: 14px; height: 14px; background: var(--n-red); border-radius: 50%;
        }

        /* SPINNER NETFLIX */
        #loader {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: var(--n-red); font-size: 4rem; z-index: 600; display: none;
        }

        /* MODO BLOQUEADO */
        .locked-mode .main-controls, .locked-mode .footer { display: none; }
    </style>
</head>
<body>

<div id="br-layer"></div>

<div class="master-container" id="master">
    <i class="fas fa-circle-notch fa-spin" id="loader"></i>

    <div class="video-box">
        <div id="yt-frame"></div>
    </div>

    <div id="br-meter" class="side-meter" style="left: 20px;"><div class="meter-fill" id="br-fill"></div></div>
    <div id="vol-meter" class="side-meter" style="right: 20px;"><div class="meter-fill" id="vol-fill"></div></div>

    <div class="ui-wrapper" id="ui">
        <header class="header">
            <div style="display:flex; align-items:center; gap:20px">
                <i class="fas fa-arrow-left back-btn"></i>
                <span id="video-title" style="font-weight:bold">Cargando video de YouTube...</span>
            </div>
            <div>
                <i class="fas fa-lock-open" id="lock-icon" style="font-size:1.5rem; cursor:pointer" onclick="toggleLock()"></i>
            </div>
        </header>

        <div class="main-controls">
            <button class="ctrl-btn skip-icon" onclick="seek(-10)"><i class="fas fa-undo-alt"></i><span>10</span></button>
            <button class="ctrl-btn" onclick="togglePlay()"><i id="play-btn" class="fas fa-play"></i></button>
            <button class="ctrl-btn skip-icon" onclick="seek(10)"><i class="fas fa-redo-alt"></i><span>10</span></button>
        </div>

        <footer class="footer">
            <div class="progress-container">
                <div class="seek-bar" id="seek-bar"><div class="seek-fill" id="seek-fill"></div></div>
                <span id="curr-time" style="font-size:0.9rem">00:00</span>
            </div>
            <div style="display:flex; justify-content:space-around; opacity:0.8; font-size:0.8rem">
                <div onclick="changeVideo('dQw4w9WgXcQ')" style="cursor:pointer"><i class="fas fa-step-forward"></i> Siguiente</div>
                <div><i class="fas fa-comment-dots"></i> Audio y Subtítulos</div>
            </div>
        </footer>
    </div>
</div>

<script>
    let player;
    let isLocked = false;
    let brightness = 100;
    let uiTimer;

    // 1. Inicializar YouTube API con personalización total
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('yt-frame', {
            videoId: 'u31qwQUeGuM', // ID de ejemplo
            playerVars: {
                'controls': 0,         // Oculta controles nativos
                'disablekb': 1,        // Desactiva teclado nativo
                'modestbranding': 1,   // Quita logo YouTube
                'rel': 0,              // No mostrar videos relacionados
                'iv_load_policy': 3,   // Oculta anotaciones
                'playsinline': 1
            },
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

    function onPlayerReady(event) {
        document.getElementById('video-title').innerText = player.getVideoData().title;
        setInterval(syncUI, 500);
    }

    function onPlayerStateChange(event) {
        const loader = document.getElementById('loader');
        const playBtn = document.getElementById('play-btn');
        
        // Spinner Netflix al cargar
        if (event.data == YT.PlayerState.BUFFERING) loader.style.display = 'block';
        else loader.style.display = 'none';

        if (event.data == YT.PlayerState.PLAYING) {
            playBtn.className = 'fas fa-pause';
            autoHideUI();
        } else {
            playBtn.className = 'fas fa-play';
            showUI();
        }
    }

    // 2. Funciones de Control
    function togglePlay() {
        if (player.getPlayerState() == YT.PlayerState.PLAYING) player.pauseVideo();
        else player.playVideo();
    }

    function seek(sec) {
        player.seekTo(player.getCurrentTime() + sec, true);
    }

    function syncUI() {
        if (player && player.getDuration) {
            const pct = (player.getCurrentTime() / player.getDuration()) * 100;
            document.getElementById('seek-fill').style.width = pct + '%';
            
            let m = Math.floor(player.getCurrentTime() / 60);
            let s = Math.floor(player.getCurrentTime() % 60);
            document.getElementById('curr-time').innerText = `${m}:${s < 10 ? '0'+s : s}`;
        }
    }

    // 3. Bloqueo de Pantalla
    function toggleLock() {
        isLocked = !isLocked;
        const icon = document.getElementById('lock-icon');
        const ui = document.getElementById('ui');
        if (isLocked) {
            icon.className = 'fas fa-lock';
            ui.classList.add('locked-mode');
        } else {
            icon.className = 'fas fa-lock-open';
            ui.classList.remove('locked-mode');
        }
    }

    // 4. Gestos Avanzados (Brillo y Volumen)
    let startY, startX, startVal;
    window.addEventListener('touchstart', e => {
        if (isLocked) return;
        startY = e.touches[0].clientY;
        startX = e.touches[0].clientX;
        if (startX < window.innerWidth / 2) {
            startVal = brightness;
            document.getElementById('br-meter').style.display = 'flex';
        } else {
            startVal = player.getVolume();
            document.getElementById('vol-meter').style.display = 'flex';
        }
    });

    window.addEventListener('touchmove', e => {
        if (isLocked) return;
        const deltaY = startY - e.touches[0].clientY;
        const change = (deltaY / window.innerHeight) * 150;

        if (startX < window.innerWidth / 2) {
            brightness = Math.min(100, Math.max(0, startVal + change));
            document.getElementById('br-layer').style.opacity = (100 - brightness) / 100;
            document.getElementById('br-fill').style.height = brightness + '%';
        } else {
            let newVol = Math.min(100, Math.max(0, startVal + change));
            player.setVolume(newVol);
            document.getElementById('vol-fill').style.height = newVol + '%';
        }
    });

    window.addEventListener('touchend', () => {
        document.querySelectorAll('.side-meter').forEach(m => m.style.display = 'none');
    });

    // 5. Manejo de Visibilidad UI
    function showUI() {
        document.getElementById('ui').classList.remove('hidden');
        clearTimeout(uiTimer);
    }

    function autoHideUI() {
        clearTimeout(uiTimer);
        uiTimer = setTimeout(() => {
            if (player.getPlayerState() == YT.PlayerState.PLAYING) 
                document.getElementById('ui').classList.add('hidden');
        }, 3000);
    }

    document.getElementById('master').addEventListener('click', () => {
        showUI();
        if (player.getPlayerState() == YT.PlayerState.PLAYING) autoHideUI();
    });

    function changeVideo(id) {
        player.loadVideoById(id);
    }
</script>

</body>
</html>
