<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Netflix Pro Player + YouTube</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.youtube.com/iframe_api"></script>
    <style>
        :root { --n-red: #E50914; --safe-top: env(safe-area-inset-top, 20px); }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; color: #fff; font-family: sans-serif; overflow: hidden; touch-action: none; }
        
        #brightness-layer { position: fixed; inset: 0; background: black; pointer-events: none; opacity: 0; z-index: 1000; }

        .player-container { position: relative; width: 100vw; height: 100vh; background: #000; }
        
        /* Contenedores de Video */
        #yt-player, #native-video { width: 100%; height: 100%; border: none; }
        .hidden-video { display: none !important; }

        /* Interfaz de Usuario */
        .ui-layer {
            position: absolute; inset: 0; z-index: 500;
            background: radial-gradient(circle, transparent 20%, rgba(0,0,0,0.8) 100%);
            display: flex; flex-direction: column; justify-content: space-between;
            padding: var(--safe-top) 40px 30px 40px;
            transition: opacity 0.4s;
        }
        .ui-layer.hidden { opacity: 0; pointer-events: none; }
        .ui-layer.locked .main-controls, .ui-layer.locked .footer { display: none; }

        /* Controles */
        .header { display: flex; justify-content: space-between; align-items: center; }
        .main-controls { display: flex; justify-content: center; align-items: center; gap: 10%; flex-grow: 1; }
        .icon-btn { background: none; border: none; color: white; cursor: pointer; font-size: 3rem; transition: 0.2s; }
        .skip { position: relative; font-size: 2.5rem; }
        .skip span { position: absolute; top: 58%; left: 50%; transform: translate(-50%, -50%); font-size: 0.7rem; font-weight: bold; }

        /* Barra Progreso */
        .footer { width: 100%; }
        .progress-box { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .rail { flex: 1; height: 4px; background: rgba(255,255,255,0.3); border-radius: 2px; position: relative; }
        .fill { height: 100%; background: var(--n-red); width: 0%; border-radius: 2px; position: relative; }
        .fill::after { content:''; position: absolute; right: -7px; top: -5px; width: 14px; height: 14px; background: var(--n-red); border-radius: 50%; }

        /* Indicadores Laterales */
        .side-bar { position: absolute; top: 50%; transform: translateY(-50%); width: 6px; height: 150px; background: rgba(255,255,255,0.2); border-radius: 10px; display: none; }
        .side-level { width: 100%; height: 50%; background: #fff; position: absolute; bottom: 0; border-radius: 10px; }
        
        /* Spinner */
        #loader { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: var(--n-red); font-size: 3rem; z-index: 600; display: none; }
    </style>
</head>
<body>

<div id="brightness-layer"></div>

<div class="player-container" id="main-container">
    <i class="fas fa-spinner fa-spin" id="loader"></i>

    <div id="yt-player"></div>
    
    <video id="native-video" class="hidden-video" playsinline></video>

    <div id="br-bar" class="side-bar" style="left: 20px;"><div class="side-level" id="br-fill"></div></div>
    <div id="vol-bar" class="side-bar" style="right: 20px;"><div class="side-level" id="vol-fill"></div></div>

    <div class="ui-layer" id="ui-overlay">
        <header class="header">
            <div><i class="fas fa-chevron-left" style="margin-right:20px"></i> <span>YouTube Pro Mode</span></div>
            <div>
                <i class="fas fa-lock-open icon-btn" id="lock-btn" style="font-size: 1.5rem;" onclick="toggleLock()"></i>
            </div>
        </header>

        <div class="main-controls">
            <button class="icon-btn skip" onclick="seek(-10)"><i class="fas fa-undo-alt"></i><span>10</span></button>
            <button class="icon-btn" onclick="togglePlay()"><i id="play-icon" class="fas fa-play"></i></button>
            <button class="icon-btn skip" onclick="seek(10)"><i class="fas fa-redo-alt"></i><span>10</span></button>
        </div>

        <footer class="footer">
            <div class="progress-box">
                <div class="rail" onclick="jump(event)"><div class="fill" id="p-fill"></div></div>
                <span id="p-time">00:00</span>
            </div>
            <div style="display:flex; justify-content: space-around; font-size: 0.7rem; opacity: 0.8;">
                <div onclick="changeVideo('dQw4w9WgXcQ')">Siguiente Video <i class="fas fa-forward"></i></div>
            </div>
        </footer>
    </div>
</div>

<script>
    let player; // YouTube
    let isLocked = false;
    let uiTimer;
    let brightness = 100;

    // 1. Inicializar YouTube API
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('yt-player', {
            videoId: 'u31qwQUeGuM', // Reemplaza con cualquier ID de YouTube
            playerVars: { 'autoplay': 0, 'controls': 0, 'disablekb': 1, 'rel': 0, 'showinfo': 0, 'iv_load_policy': 3 },
            events: { 'onStateChange': onPlayerStateChange, 'onReady': onPlayerReady }
        });
    }

    function onPlayerReady(event) {
        setInterval(updateProgress, 500);
    }

    function onPlayerStateChange(event) {
        const loader = document.getElementById('loader');
        const icon = document.getElementById('play-icon');
        if (event.data == YT.PlayerState.BUFFERING) loader.style.display = 'block';
        else loader.style.display = 'none';
        
        if (event.data == YT.PlayerState.PLAYING) icon.className = 'fas fa-pause';
        else icon.className = 'fas fa-play';
    }

    // 2. Controles de Reproducci√≥n
    function togglePlay() {
        if (player.getPlayerState() == YT.PlayerState.PLAYING) player.pauseVideo();
        else player.playVideo();
        showUI();
    }

    function seek(sec) {
        player.seekTo(player.getCurrentTime() + sec, true);
        showUI();
    }

    function updateProgress() {
        if (player && player.getDuration) {
            const pct = (player.getCurrentTime() / player.getDuration()) * 100;
            document.getElementById('p-fill').style.width = pct + '%';
            
            let m = Math.floor(player.getCurrentTime() / 60);
            let s = Math.floor(player.getCurrentTime() % 60);
            document.getElementById('p-time').innerText = `${m}:${s < 10 ? '0'+s : s}`;
        }
    }

    function jump(e) {
        const pct = e.offsetX / e.target.offsetWidth;
        player.seekTo(pct * player.getDuration(), true);
    }

    // 3. Bloqueo de Pantalla
    function toggleLock() {
        isLocked = !isLocked;
        const btn = document.getElementById('lock-btn');
        const ui = document.getElementById('ui-overlay');
        if (isLocked) {
            btn.className = 'fas fa-lock icon-btn';
            ui.classList.add('locked');
        } else {
            btn.className = 'fas fa-lock-open icon-btn';
            ui.classList.remove('locked');
        }
    }

    // 4. Gestos de Brillo y Volumen
    let startY, startX;
    window.addEventListener('touchstart', e => {
        startY = e.touches[0].clientY;
        startX = e.touches[0].clientX;
        if (!isLocked) {
            if (startX < window.innerWidth / 2) document.getElementById('br-bar').style.display = 'block';
            else document.getElementById('vol-bar').style.display = 'block';
        }
    });

    window.addEventListener('touchmove', e => {
        if (isLocked) return;
        const deltaY = startY - e.touches[0].clientY;
        const change = (deltaY / window.innerHeight) * 150;

        if (startX < window.innerWidth / 2) {
            brightness = Math.min(100, Math.max(0, brightness + change));
            document.getElementById('brightness-layer').style.opacity = (100 - brightness) / 100;
            document.getElementById('br-fill').style.height = brightness + '%';
        } else {
            let vol = player.getVolume();
            player.setVolume(Math.min(100, Math.max(0, vol + change)));
            document.getElementById('vol-fill').style.height = player.getVolume() + '%';
        }
        startY = e.touches[0].clientY;
    });

    window.addEventListener('touchend', () => {
        document.querySelectorAll('.side-bar').forEach(b => b.style.display = 'none');
    });

    // 5. Manejo de UI
    function showUI() {
        document.getElementById('ui-overlay').classList.remove('hidden');
        clearTimeout(uiTimer);
        uiTimer = setTimeout(() => {
            if (player.getPlayerState() == YT.PlayerState.PLAYING) 
                document.getElementById('ui-overlay').classList.add('hidden');
        }, 4000);
    }

    document.getElementById('main-container').addEventListener('click', showUI);
    
    function changeVideo(id) {
        player.loadVideoById(id);
    }
</script>

</body>
</html>
