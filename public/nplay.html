<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Netflix Ultimate Player</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --n-red: #E50914;
            --safe-top: env(safe-area-inset-top, 20px);
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: #000; color: #fff; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            overflow: hidden; touch-action: none; /* Desactivar gestos nativos para usar los nuestros */
        }

        /* Contenedor de brillo (Filtro) */
        #brightness-overlay {
            position: fixed; inset: 0; background: black; pointer-events: none; opacity: 0; z-index: 100;
        }

        .video-wrapper {
            position: relative; width: 100vw; height: 100vh;
            display: flex; align-items: center; justify-content: center;
        }

        video { width: 100%; height: 100%; object-fit: contain; transition: transform 0.3s; }

        /* Capa de UI */
        .ui-layer {
            position: absolute; inset: 0; z-index: 50;
            background: linear-gradient(0deg, rgba(0,0,0,0.7) 0%, transparent 50%, rgba(0,0,0,0.7) 100%);
            display: flex; flex-direction: column; justify-content: space-between;
            padding: var(--safe-top) 40px var(--safe-bottom) 40px;
            transition: opacity 0.4s ease;
        }

        .ui-layer.hidden { opacity: 0; pointer-events: none; }

        /* Indicadores de Brillo y Volumen (Laterales) */
        .side-indicator {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 6px; height: 150px; background: rgba(255,255,255,0.2);
            border-radius: 10px; display: none; flex-direction: column-reverse;
        }
        .level-bar { width: 100%; height: 50%; background: white; border-radius: 10px; box-shadow: 0 0 10px rgba(255,255,255,0.5); }
        .side-icon { position: absolute; top: -30px; left: -10px; width: 30px; text-align: center; }

        #br-indicator { left: 20px; }
        #vol-indicator { right: 20px; }

        /* Controles */
        .header { display: flex; justify-content: space-between; align-items: center; }
        .center-row { display: flex; justify-content: center; align-items: center; gap: 60px; }
        .btn-main { background: none; border: none; color: white; font-size: 3rem; cursor: pointer; }
        .skip-btn { position: relative; font-size: 2.2rem; }
        .skip-btn span { position: absolute; top: 56%; left: 50%; transform: translate(-50%, -50%); font-size: 0.7rem; font-weight: bold; }

        /* Barra de progreso */
        .footer { width: 100%; }
        .progress-container { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .rail { flex: 1; height: 4px; background: rgba(255,255,255,0.3); border-radius: 2px; position: relative; }
        .fill { height: 100%; background: var(--n-red); width: 0%; border-radius: 2px; }

        .nav-items { display: flex; justify-content: space-around; font-size: 0.75rem; }
        .nav-item { display: flex; flex-direction: column; align-items: center; gap: 5px; opacity: 0.7; cursor: pointer; }
    </style>
</head>
<body>

<div id="brightness-overlay"></div>

<div class="video-wrapper" id="player">
    <video id="main-v" src="https://www.w3schools.com/html/mov_bbb.mp4" playsinline></video>

    <div id="br-indicator" class="side-indicator">
        <div class="side-icon"><i class="fas fa-sun"></i></div>
        <div class="level-bar" id="br-level"></div>
    </div>
    <div id="vol-indicator" class="side-indicator">
        <div class="side-icon"><i class="fas fa-volume-up"></i></div>
        <div class="level-bar" id="vol-level"></div>
    </div>

    <div class="ui-layer" id="ui">
        <header class="header">
            <div><i class="fas fa-arrow-left"></i> <span style="margin-left: 15px">T2:E36 "Por las nalgas de Circe"</span></div>
            <div><i class="fas fa-expand" onclick="toggleZoom()" style="cursor:pointer"></i></div>
        </header>

        <div class="center-row">
            <button class="btn-main skip-btn" onclick="seek(-10)"><i class="fas fa-undo-alt"></i><span>10</span></button>
            <button class="btn-main" onclick="togglePlay()"><i id="pp-icon" class="fas fa-play"></i></button>
            <button class="btn-main skip-btn" onclick="seek(10)"><i class="fas fa-redo-alt"></i><span>10</span></button>
        </div>

        <footer class="footer">
            <div class="progress-container">
                <div class="rail"><div class="fill" id="progress-fill"></div></div>
                <span id="time">00:00</span>
            </div>
            <div class="nav-items">
                <div class="nav-item"><i class="fas fa-scissors"></i><span>Recortar</span></div>
                <div class="nav-item"><i class="fas fa-gauge-high"></i><span>Velocidad</span></div>
                <div class="nav-item"><i class="fas fa-clone"></i><span>Episodios</span></div>
                <div class="nav-item"><i class="fas fa-comment-dots"></i><span>Audio</span></div>
                <div class="nav-item"><i class="fas fa-step-forward"></i><span>Siguiente</span></div>
            </div>
        </footer>
    </div>
</div>

<script>
    const v = document.getElementById('main-v');
    const ui = document.getElementById('ui');
    const brOverlay = document.getElementById('brightness-overlay');
    const fill = document.getElementById('progress-fill');
    
    let brightness = 100;
    let volume = 100;
    let isZoomed = false;

    // --- FUNCIONES BÃSICAS ---
    function togglePlay() {
        const icon = document.getElementById('pp-icon');
        if(v.paused) { v.play(); icon.className = 'fas fa-pause'; hideUI(3000); }
        else { v.pause(); icon.className = 'fas fa-play'; showUI(); }
    }

    function seek(s) { v.currentTime += s; }

    function toggleZoom() {
        isZoomed = !isZoomed;
        v.style.objectFit = isZoomed ? 'cover' : 'contain';
    }

    v.addEventListener('timeupdate', () => {
        const pct = (v.currentTime / v.duration) * 100;
        fill.style.width = pct + '%';
        let m = Math.floor(v.currentTime / 60);
        let s = Math.floor(v.currentTime % 60);
        document.getElementById('time').innerText = `${m}:${s < 10 ? '0'+s : s}`;
    });

    // --- GESTOS (BRILLO Y VOLUMEN) ---
    let startY, startVal, activeSide;

    window.addEventListener('touchstart', e => {
        startY = e.touches[0].clientY;
        const x = e.touches[0].clientX;
        if(x < window.innerWidth / 2) {
            activeSide = 'br';
            startVal = brightness;
            document.getElementById('br-indicator').style.display = 'flex';
        } else {
            activeSide = 'vol';
            startVal = volume;
            document.getElementById('vol-indicator').style.display = 'flex';
        }
    });

    window.addEventListener('touchmove', e => {
        const deltaY = startY - e.touches[0].clientY;
        const change = (deltaY / window.innerHeight) * 200; // Sensibilidad
        
        if(activeSide === 'br') {
            brightness = Math.min(100, Math.max(0, startVal + change));
            brOverlay.style.opacity = (100 - brightness) / 100;
            document.getElementById('br-level').style.height = brightness + '%';
        } else {
            volume = Math.min(100, Math.max(0, startVal + change));
            v.volume = volume / 100;
            document.getElementById('vol-level').style.height = volume + '%';
        }
    });

    window.addEventListener('touchend', () => {
        document.querySelectorAll('.side-indicator').forEach(el => el.style.display = 'none');
    });

    // --- AUTO HIDE UI ---
    let uiTimer;
    function showUI() { ui.classList.remove('hidden'); clearTimeout(uiTimer); }
    function hideUI(delay) { uiTimer = setTimeout(() => { if(!v.paused) ui.classList.add('hidden') }, delay); }

    document.getElementById('player').addEventListener('click', () => {
        if(ui.classList.contains('hidden')) showUI();
        hideUI(3000);
    });

</script>
</body>
</html>
